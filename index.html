<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dream Navigator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Nanum Gothic', sans-serif; }
    </style>
    <script async src="https://cdn.jsdelivr.net/npm/es-module-shims@1.8.0/dist/es-module-shims.js"></script>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@19.2.3",
        "react-dom/client": "https://esm.sh/react-dom@19.2.3/client",
        "@google/genai": "https://esm.sh/@google/genai@1.37.0",
        "lucide-react": "https://esm.sh/lucide-react@0.562.0"
      }
    }
    </script>
</head>
<body class="bg-blue-50">
    <div id="root"></div>
    <script type="module">
        import React, { useState } from 'react';
        import { createRoot } from 'react-dom/client';
        import { GoogleGenAI, Type } from '@google/genai';
        import { Sparkles, Rocket, User, RefreshCw, Heart, Target, Lock } from 'lucide-react';

        const SchoolGrade = {
          LOW: 'Ï¥àÎì± Ï†ÄÌïôÎÖÑ (1-3ÌïôÎÖÑ)',
          MID: 'Ï¥àÎì± Í≥†ÌïôÎÖÑ (4-6ÌïôÎÖÑ)',
          PRE_MIDDLE: 'Ï§ëÌïôÍµê ÏûÖÌïô Ï§ÄÎπÑ (ÏòàÎπÑ Ï§ë1)'
        };

        async function getCareerCounseling(data, apiKey) {
          const ai = new GoogleGenAI({ apiKey });
          const prompt = `ÎãπÏã†ÏùÄ ÏÑ∏Í≥Ñ ÏµúÍ≥†Ïùò ÏïÑÎèô Ïã¨Î¶¨ Î∞è ÏßÑÎ°ú ÏÉÅÎã¥ Ï†ÑÎ¨∏Í∞ÄÏûÖÎãàÎã§. 
ÏïÑÏù¥Ïùò Ï†ïÎ≥¥Î•º Î∞îÌÉïÏúºÎ°ú ÎØ∏Îûò Í≤ΩÎ°úÎ•º ÏÑ§Í≥ÑÌï¥Ï£ºÏÑ∏Ïöî.

[ÏÉÅÎã¥ Ï†ïÎ≥¥]
- ÌïôÎÖÑ: ${data.grade}
- Í¥ÄÏã¨: ${data.keywords.join(', ')}
- Ï∑®ÎØ∏: ${data.hobbies}
- ÌäπÍ∏∞: ${data.talents}

ÌïúÍµ≠Ïñ¥Î°ú Îã§Ï†ïÌïòÍ≤å ÎãµÎ≥ÄÌï¥Ï£ºÏÑ∏Ïöî. JSON ÌòïÏãùÏúºÎ°ú ÏùëÎãµÌïòÏÑ∏Ïöî.`;

          const response = await ai.models.generateContent({
            model: 'gemini-2.0-flash',
            contents: prompt,
            config: {
              responseMimeType: 'application/json',
              responseSchema: {
                type: Type.OBJECT,
                properties: {
                  careerName: { type: Type.STRING },
                  description: { type: Type.STRING },
                  focusArea: { type: Type.STRING, enum: ['ACADEMIC', 'PRACTICAL', 'ARTISTIC', 'SPORTS'] },
                  actionPlan: { type: Type.ARRAY, items: { type: Type.STRING } },
                  parentAdvice: { type: Type.STRING }
                },
                required: ['careerName', 'description', 'focusArea', 'actionPlan', 'parentAdvice']
              }
            }
          });
          return JSON.parse(response.text);
        }

        function App() {
          const [apiKey, setApiKey] = useState('');
          const [step, setStep] = useState(0);
          const [loading, setLoading] = useState(false);
          const [data, setData] = useState({
            keywords: [],
            grade: '',
            hobbies: '',
            talents: ''
          });
          const [suggestion, setSuggestion] = useState(null);
          const [currentKeyword, setCurrentKeyword] = useState('');

          const handleApiKeySubmit = () => {
            if (apiKey.trim()) setStep(1);
            else alert("API ÌÇ§Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!");
          };

          const addKeyword = () => {
            if (currentKeyword.trim() && !data.keywords.includes(currentKeyword.trim())) {
              setData({ ...data, keywords: [...data.keywords, currentKeyword.trim()] });
              setCurrentKeyword('');
            }
          };

          const handleStartAnalysis = async () => {
            if (!data.grade || data.keywords.length < 2) {
              alert("ÌïôÎÖÑÏùÑ ÏÑ†ÌÉùÌïòÍ≥† Îã®Ïñ¥Î•º ÏµúÏÜå 2Í∞ú Ïù¥ÏÉÅ Ï†ÅÏñ¥Ï£ºÏÑ∏Ïöî!");
              return;
            }
            setLoading(true);
            try {
              const result = await getCareerCounseling(data, apiKey);
              setSuggestion(result);
              setStep(3);
            } catch (error) {
              console.error(error);
              alert("Ïò§Î•ò: " + (error.message || 'Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî'));
            } finally {
              setLoading(false);
            }
          };

          const reset = () => {
            setStep(1);
            setSuggestion(null);
            setData({ keywords: [], grade: '', hobbies: '', talents: '' });
          };

          if (step === 0) {
            return React.createElement('div', { className: "min-h-screen bg-gradient-to-b from-blue-50 to-white flex items-center justify-center p-4" },
              React.createElement('div', { className: "w-full max-w-md bg-white rounded-2xl shadow-2xl p-8" },
                React.createElement('div', { className: "flex justify-center mb-4" },
                  React.createElement(Lock, { className: "text-orange-500", size: 48 })
                ),
                React.createElement('h2', { className: "text-2xl font-bold text-gray-800 text-center mb-2" }, "Google Gemini API"),
                React.createElement('p', { className: "text-gray-600 text-center mb-6 text-sm" }, 
                  React.createElement('a', { href: 'https://aistudio.google.com', target: '_blank', rel: 'noopener', className: "text-blue-600 hover:underline" }, "AI Studio"), "ÏóêÏÑú API ÌÇ§Î•º Î∞úÍ∏âÎ∞õÏúºÏÑ∏Ïöî."
                ),
                React.createElement('input', {
                  type: "password",
                  placeholder: "API ÌÇ§ ÏûÖÎ†• (AIza...)",
                  className: "w-full rounded-xl border-2 border-gray-200 p-3 mb-4 text-sm",
                  value: apiKey,
                  onChange: (e) => setApiKey(e.target.value),
                  onKeyPress: (e) => e.key === 'Enter' && handleApiKeySubmit()
                }),
                React.createElement('button', {
                  className: "w-full py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition",
                  onClick: handleApiKeySubmit
                }, "ÏãúÏûëÌïòÍ∏∞")
              )
            );
          }

          return React.createElement('div', { className: "min-h-screen flex flex-col items-center justify-start p-4 md:p-8 bg-gradient-to-b from-blue-50 to-white" },
            React.createElement('header', { className: "w-full max-w-2xl text-center mb-8" },
              React.createElement('h1', { className: "text-4xl font-extrabold text-blue-600 flex items-center justify-center gap-2" },
                React.createElement(Rocket, { className: "text-orange-400", size: 40 }),
                " ÎìúÎ¶º ÎÇ¥ÎπÑÍ≤åÏù¥ÌÑ∞"
              ),
              React.createElement('p', { className: "text-gray-600 mt-2" }, "Ïö∞Î¶¨ ÏïÑÏù¥Ïùò ÏßÑÏã¨ÏùÑ Ï∞æÎäî AI ÏßÑÎ°ú ÏÉÅÎã¥ÏÜå")
            ),
            
            React.createElement('main', { className: "w-full max-w-2xl bg-white rounded-3xl shadow-2xl overflow-hidden border-8 border-blue-50" },
              step === 1 && React.createElement('div', { className: "p-8 space-y-6" },
                React.createElement('div', { className: "flex items-center gap-3 text-xl font-bold text-gray-800 border-b pb-4" },
                  React.createElement(User, { className: "text-blue-500" }),
                  " ÏïàÎÖï! ÎÑàÏóê ÎåÄÌï¥ ÏïåÎ†§Ï§ò"
                ),
                
                React.createElement('label', null,
                  React.createElement('span', { className: "block text-gray-700 font-bold mb-2" }, "ÏßÄÍ∏à Î™á ÌïôÎÖÑÏù¥Ïïº?"),
                  React.createElement('select', {
                    className: "w-full rounded-xl border-2 border-gray-200 p-3 text-black font-semibold",
                    value: data.grade,
                    onChange: (e) => setData({...data, grade: e.target.value})
                  },
                    React.createElement('option', { value: "" }, "ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî"),
                    Object.values(SchoolGrade).map(g => React.createElement('option', { key: g, value: g }, g))
                  )
                ),
                
                React.createElement('label', null,
                  React.createElement('span', { className: "block text-gray-700 font-bold mb-2" }, "Í¥ÄÏã¨ ÏûàÎäî Í≤ÉÎì§? (ÏµúÏÜå 2Í∞ú)"),
                  React.createElement('div', { className: "flex gap-2 mb-2" },
                    React.createElement('input', {
                      type: "text",
                      placeholder: "Ïòà: Ïö∞Ï£º, Í≥ºÌïô",
                      className: "flex-1 rounded-xl border-2 border-gray-200 p-3",
                      value: currentKeyword,
                      onChange: (e) => setCurrentKeyword(e.target.value),
                      onKeyPress: (e) => e.key === 'Enter' && addKeyword()
                    }),
                    React.createElement('button', {
                      className: "px-4 py-3 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600",
                      onClick: addKeyword
                    }, "Ï∂îÍ∞Ä")
                  ),
                  React.createElement('div', { className: "flex flex-wrap gap-2" },
                    data.keywords.map(k =>
                      React.createElement('span', { key: k, className: "bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm flex items-center gap-1" },
                        k,
                        React.createElement('button', { onClick: () => setData({...data, keywords: data.keywords.filter(x => x !== k)}) }, "‚úï")
                      )
                    )
                  )
                ),
                
                React.createElement('textarea', {
                  placeholder: "ÌïòÍ≥† Ïã∂ÏùÄ ÏùºÏù¥ÎÇò Ï∑®ÎØ∏?",
                  className: "w-full rounded-xl border-2 border-gray-200 p-3 min-h-20",
                  value: data.hobbies,
                  onChange: (e) => setData({...data, hobbies: e.target.value})
                }),
                
                React.createElement('textarea', {
                  placeholder: "ÏûòÌïòÎäî Í≤ÉÏù¥ÎÇò ÌäπÍ∏∞?",
                  className: "w-full rounded-xl border-2 border-gray-200 p-3 min-h-20",
                  value: data.talents,
                  onChange: (e) => setData({...data, talents: e.target.value})
                }),
                
                React.createElement('button', {
                  className: "w-full py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-bold text-lg hover:shadow-lg flex items-center justify-center gap-2 disabled:opacity-50",
                  onClick: handleStartAnalysis,
                  disabled: loading
                },
                  React.createElement(Sparkles, { size: 20 }),
                  loading ? "ÏÉùÍ∞Å Ï§ë..." : "AIÏôÄ ÏÉÅÎã¥ÌïòÍ∏∞"
                )
              ),
              
              step === 3 && suggestion && React.createElement('div', { className: "p-8 space-y-6" },
                React.createElement('div', { className: "flex items-center gap-2 text-2xl font-bold text-blue-600 border-b pb-4" },
                  React.createElement(Target, { size: 28 }),
                  suggestion.careerName
                ),
                
                React.createElement('p', { className: "text-gray-700 leading-relaxed" }, suggestion.description),
                
                React.createElement('div', { className: "bg-blue-50 rounded-xl p-4" },
                  React.createElement('h3', { className: "font-bold text-blue-700 mb-3" }, "üìå Îã§Ïùå Îã®Í≥ÑÎäî?"),
                  React.createElement('ul', { className: "space-y-2" },
                    suggestion.actionPlan.map((item, i) =>
                      React.createElement('li', { key: i, className: "text-gray-700" },
                        React.createElement('span', { className: "font-bold text-blue-600" }, i + 1), ". ", item
                      )
                    )
                  )
                ),
                
                React.createElement('div', { className: "bg-yellow-50 rounded-xl p-4 border-2 border-yellow-200" },
                  React.createElement('h3', { className: "font-bold text-yellow-800 mb-3" }, "‚ù§Ô∏è Î∂ÄÎ™®ÎãòÍªò"),
                  React.createElement('p', { className: "text-gray-700 leading-relaxed" }, suggestion.parentAdvice)
                ),
                
                React.createElement('button', {
                  className: "w-full py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 flex items-center justify-center gap-2",
                  onClick: reset
                },
                  React.createElement(RefreshCw, { size: 18 }),
                  "Îã§Ïãú ÏãúÏûë"
                )
              )
            )
          );
        }

        createRoot(document.getElementById('root')).render(React.createElement(App));
    </script>
</body>
</html>
